
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Implementing Modules in CPAC&#8217;s GUI - BUILDING NON-LINEAR ANALYSIS TOOLS FOR C-PAC</title>
  <meta name="author" content="github.com/erramuzpe">

  
  <meta name="description" content="This week I have been trying to work with the migration of our modules to the GUI. For that, you will need to perform three main steps: Create the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://erramuzpe.github.io/C-PAC/blog/2015/07/15/implementing-modules-in-the-gui/">
  <link href="/C-PAC/favicon.png" rel="icon">
  <link href="/C-PAC/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/C-PAC/atom.xml" rel="alternate" title="BUILDING NON-LINEAR ANALYSIS TOOLS FOR C-PAC" type="application/atom+xml">
  <script src="/C-PAC/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/C-PAC/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/C-PAC/">BUILDING NON-LINEAR ANALYSIS TOOLS FOR C-PAC</a></h1>
  
    <h2>Contributing to C-PAC</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/C-PAC/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="erramuzpe.github.io/C-PAC">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/C-PAC/">Blog</a></li>
  <li><a href="/C-PAC/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Implementing Modules in CPAC&#8217;s GUI</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-15T12:24:57+02:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:24 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>This week I have been trying to work with the migration of our modules to the GUI. For that, you will need to perform three main steps:</p>

<ul>
<li>Create the interface for your modules (2 steps)

<ul>
<li>Define your space in the main configuration window tree. (Name your module/submodules)</li>
<li>Define a window with configuration options (inputs and output of your workflow basically) for each one of your modules/submodules. The main window of the module usually is referred to an html file explaining what this module does and how does it work.</li>
</ul>
</li>
<li>Link the GUI with your workflows (1 step)

<ul>
<li>Link the configuration window of each of the submodules with the corresponding workflow through the pipeline module, allowing the execution of your workflows.</li>
</ul>
</li>
</ul>


<h2><strong> Create the interface for your modules </strong></h2>

<h4><strong> STEP 1 </strong></h4>

<p>The interface for the modules needs to be created. This is done by adding your module structure to the main configuration tree (a bit of planification is needed before deciding how the module structure is going to be organized). The first 2 steps should be done in parallel, I choosed to create the tree structure first, because I thought it was better a up to bottom approach.</p>

<p>First of all, you have to define your space in the <a href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/GUI/interface/windows/config_window.py">config_window</a> file, in the Class named &lsquo;Mybook&rsquo;.</p>

<p>There, you can find all the module names that will be listed in the main left of the pipeline configuration window. As an example, I have added some lines at the end of the Class:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'>   <span class="bp">self</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="n">page43</span><span class="p">,</span> <span class="s">&quot;CWAS&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">AddSubPage</span><span class="p">(</span><span class="n">page44</span><span class="p">,</span> <span class="s">&quot;CWAS Settings&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="n">page45</span><span class="p">,</span> <span class="s">&quot;Group Analysis&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">AddSubPage</span><span class="p">(</span><span class="n">page46</span><span class="p">,</span> <span class="s">&quot;Group Analysis Settings&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</span><span class='line'>        <span class="c">### ADDED NEXT 3 LINES: 48 is my main module name. 49 and 50 submodules inside 48</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">AddPage</span><span class="p">(</span><span class="n">page48</span><span class="p">,</span> <span class="s">&quot;Non Linear TS Analysis&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">AddSubPage</span><span class="p">(</span><span class="n">page49</span><span class="p">,</span> <span class="s">&quot;Information Theory&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">AddSubPage</span><span class="p">(</span><span class="n">page50</span><span class="p">,</span> <span class="s">&quot;Causality&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>It is also important to add the name of your GUI Classes in the import at the beginning of the file. In the second step, these Classes will be defined.</p>

<h4><strong> STEP 2 </strong></h4>

<p>In this step the Classes that create your configuration pages must be created. Here, it will be defined a window with configuration options (inputs and output of your workflow basically) for each one of your modules/submodules. For this purpose, it is neccessary to create a new file in the <a href="https://github.com/FCP-INDI/C-PAC/tree/master/CPAC/GUI/interface/pages">&lsquo;pages&rsquo; directory</a>, other files can be used an example.</p>

<p>The main window of the module (in our example the 48) is usually referred to an html file explaining what this module does and how does it work. If you don&rsquo;t have such file yet, you can leave it blank. For the rest of submodules, as CPAC&rsquo;s has its own framework built over <a href="http://www.wxpython.org/">wx</a>, we can choose between many specific buttons and data tpyes to add to our window:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="n">control</span> <span class="o">=</span> <span class="n">enum</span><span class="p">(</span><span class="n">CHOICE_BOX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>               <span class="n">TEXT_BOX</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>               <span class="n">COMBO_BOX</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>               <span class="n">INT_CTRL</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>               <span class="n">FLOAT_CTRL</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>               <span class="n">DIR_COMBO_BOX</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>               <span class="n">CHECKLIST_BOX</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>               <span class="n">LISTBOX_COMBO</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
</span><span class='line'>               <span class="n">TEXTBOX_COMBO</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
</span><span class='line'>               <span class="n">CHECKBOX_GRID</span> <span class="o">=</span> <span class="mi">9</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">dtype</span> <span class="o">=</span> <span class="n">enum</span><span class="p">(</span><span class="n">BOOL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>             <span class="n">STR</span><span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>             <span class="n">NUM</span><span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>             <span class="n">LBOOL</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>             <span class="n">LSTR</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>             <span class="n">LNUM</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>             <span class="n">LOFL</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
</span><span class='line'>             <span class="n">COMBO</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
</span><span class='line'>             <span class="n">LDICT</span><span class="o">=</span> <span class="mi">8</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is an example of how it can be a GUI frame for our toolbox:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="k">class</span> <span class="nc">InformationTheory</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ScrolledWindow</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
</span><span class='line'>        <span class="n">wx</span><span class="o">.</span><span class="n">ScrolledWindow</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="n">GenericClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;Information Theory Calculation Options&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Run Information Theory Measures&quot;</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="o">.</span><span class="n">CHOICE_BOX</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">name</span><span class="o">=</span><span class="s">&#39;runIT&#39;</span><span class="p">,</span>
</span><span class='line'>                 <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="o">.</span><span class="n">LSTR</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">comment</span><span class="o">=</span><span class="s">&quot;Run Information Theory Measures&quot;</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Off&quot;</span><span class="p">,</span><span class="s">&quot;On&quot;</span><span class="p">],</span>
</span><span class='line'>                 <span class="n">wkf_switch</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Voxelwise / ROI extraction&quot;</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="o">.</span><span class="n">CHOICE_BOX</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">name</span><span class="o">=</span><span class="s">&#39;voxel_roi&#39;</span><span class="p">,</span>
</span><span class='line'>                 <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="o">.</span><span class="n">LSTR</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">comment</span><span class="o">=</span><span class="s">&quot;Run Information Theory Measures voxelwise or after ROI timeseries             extraction&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Voxelwise&quot;</span><span class="p">,</span><span class="s">&quot;ROI&quot;</span><span class="p">,</span><span class="s">&quot;Voxelwise/ROI&quot;</span><span class="p">],</span>
</span><span class='line'>                 <span class="n">wkf_switch</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;fMRI image&quot;</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="o">.</span><span class="n">COMBO_BOX</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">name</span><span class="o">=</span><span class="s">&#39;input_image&#39;</span><span class="p">,</span>
</span><span class='line'>                     <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="o">.</span><span class="n">STR</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">comment</span><span class="o">=</span><span class="s">&quot;fMRI image for calculation&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Parcellation Mask&quot;</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="o">.</span><span class="n">COMBO_BOX</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">name</span><span class="o">=</span><span class="s">&#39;input_mask&#39;</span><span class="p">,</span>
</span><span class='line'>                     <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="o">.</span><span class="n">STR</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">comment</span><span class="o">=</span><span class="s">&quot;Parcellation Mask if you want to calculate&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Measures:&quot;</span><span class="p">,</span>
</span><span class='line'>                      <span class="c">#control = control.CHECKLISTBOX_COMBO,</span>
</span><span class='line'>                      <span class="n">control</span> <span class="o">=</span> <span class="n">control</span><span class="o">.</span><span class="n">LISTBOX_COMBO</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Measures&quot;</span><span class="p">,</span>
</span><span class='line'>                      <span class="nb">type</span> <span class="o">=</span> <span class="n">dtype</span><span class="o">.</span><span class="n">LDICT</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Entropy&#39;</span><span class="p">,</span> <span class="s">&#39;Conditional Entropy&#39;</span><span class="p">,</span><span class="s">&#39;Mutual Information&#39;</span><span class="p">,</span><span class="s">&#39;Transfer Entropy&#39;</span><span class="p">,</span><span class="s">&#39;Entropy Correlation Coefficient&#39;</span><span class="p">],</span>
</span><span class='line'>                      <span class="n">comment</span> <span class="o">=</span> <span class="s">&quot;Select which IT measures to apply:</span><span class="se">\n</span><span class="s">&quot;</span>\
</span><span class='line'>                                <span class="s">&quot;ent = Entropy</span><span class="se">\n</span><span class="s">&quot;</span>\
</span><span class='line'>                                 <span class="s">&quot;condent = Conditional Entropy</span><span class="se">\n</span><span class="s">&quot;</span>\
</span><span class='line'>                                 <span class="s">&quot;mi = Mutual Information</span><span class="se">\n</span><span class="s">&quot;</span>\
</span><span class='line'>                                 <span class="s">&quot;te = Transfer Entropy</span><span class="se">\n</span><span class="s">&quot;</span>\
</span><span class='line'>                                 <span class="s">&quot;ecc = Entropy Correlation Coefficient</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
</span><span class='line'>                     <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">120</span><span class="p">),</span>
</span><span class='line'>                     <span class="n">combo_type</span> <span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Output Options &quot;</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">control</span><span class="o">=</span><span class="n">control</span><span class="o">.</span><span class="n">CHECKLIST_BOX</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">name</span><span class="o">=</span><span class="s">&quot;measure_options&quot;</span><span class="p">,</span>
</span><span class='line'>                      <span class="nb">type</span><span class="o">=</span><span class="n">dtype</span><span class="o">.</span><span class="n">LBOOL</span><span class="p">,</span>
</span><span class='line'>                      <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;CSV&#39;</span><span class="p">,</span> <span class="s">&#39;NUMPY&#39;</span><span class="p">,</span><span class="s">&#39;NIFTI&#39;</span><span class="p">],</span>
</span><span class='line'>                      <span class="n">comment</span><span class="o">=</span><span class="s">&quot;By default, results are written as NIFTI files. Additional output formats are as a .csv spreadsheet or a Numpy array.&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">set_sizer</span><span class="p">()</span>
</span><span class='line'>        <span class="n">parent</span><span class="o">.</span><span class="n">get_page_list</span><span class="p">()</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>It is important to update the <strong>init</strong> file of the folder &lsquo;pages&rsquo; to make the new file available and checking all the intermodule dependencies and imports.
After doing these modifications, the modifications will be seen as long as the <a href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/GUI/mainUI.py">MainUI</a> file runs without problem.</p>

<p>In the next figure, it can be seen how the example code is translated into the GUI:</p>

<p><img class="center" src="/C-PAC/images/CPAC_GUI.png" width="800" height="800" title="image" alt="image"></p>

<p>After completing your configuration, a YAML file will be created with the information provided into the different inputs.</p>

<h2><strong> Link the GUI with your workflows </strong></h2>

<h4><strong> STEP 3 </strong></h4>

<p>This is probably the most important step along with having a good planification of the needs of the module. The objective here is to link the configuration window of each of the submodules with the corresponding workflow through the pipeline module and specifically the <a href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/pipeline/cpac_pipeline.py">cpac_pipeline</a> file, allowing the execution of your workflows.</p>

<p>First of all, it is needed to import the workflows into the file. After that, and having as a reference other workflow insertions, you can take the input data saved in the previous step from a <a href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/utils/configuration.py">Configuration object</a> called &lsquo;c&rsquo;. This ‘c’ variable is an abstract representation used to store the options for the pipeline configuration YAML. The use of the YAML file, allows users to load preconfigured files easily.
The YAML was generated by the GUI in the previous step and it is reloaded back in by <a href="https://github.com/FCP-INDI/C-PAC/blob/afbc30e28e4c282847920119e922953690835d36/CPAC/pipeline/cpac_runner.py#L381">cpac_runner</a>  as a Configuration object (‘c’).  Finally, <em>cpac_runner.py</em> passes the Configuration object to <em>cpac_pipeline.py</em> as an argument.</p>

<p>There is the need of checking if the inputs are correct (otherwise, raise an error message), create the workflow and give to it the inputs extracted from &lsquo;c&rsquo;.
<em>cpac_pipeline.py</em> is where the Nipype workflow object for each pipeline strategy is constructed via flow control. We will want to add a code block similar to <a href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/pipeline/cpac_pipeline.py#L3028-L3197">this</a>  in order to add the nonlinear time-series node to these workflows.  The functions will be encapsulated within nodes and connected to a workflow.</p>

<p>Short example of how to manage the inputs:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'>    <span class="sd">&#39;&#39;&#39;</span>
</span><span class='line'><span class="sd">    Inserting NLTSA</span>
</span><span class='line'><span class="sd">    Workflow</span>
</span><span class='line'><span class="sd">    &#39;&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">new_strat_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="n">num_strat</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="mi">1</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">runIT</span><span class="p">:</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">strat</span> <span class="ow">in</span> <span class="n">strat_list</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="s">&#39;mi&#39;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">MEASURES</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">pipeline</span> <span class="o">=</span> <span class="n">create_mi</span><span class="p">()</span>
</span><span class='line'>            <span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">input_image</span>
</span><span class='line'>            <span class="n">pipeline</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">mask_file</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">input_mask</span>
</span><span class='line'>            <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">num_strat</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>    <span class="n">strat_list</span> <span class="o">+=</span> <span class="n">new_strat_list</span>
</span></code></pre></td></tr></table></div></figure>


<p>After completing this last step, the new module of CPAC should be working.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">github.com/erramuzpe</span></span>

      




<time class='entry-date' datetime='2015-07-15T12:24:57+02:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:24 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://erramuzpe.github.io/C-PAC/blog/2015/07/15/implementing-modules-in-the-gui/" data-via="" data-counturl="http://erramuzpe.github.io/C-PAC/blog/2015/07/15/implementing-modules-in-the-gui/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/C-PAC/blog/2015/07/09/testing-different-parcellations-over-ad-patients-data/" title="Previous Post: Testing over ADHD patients data">&laquo; Testing over ADHD patients data</a>
      
      
        <a class="basic-alignment right" href="/C-PAC/blog/2015/07/22/discussion-and-planning-gui-for-nltsa-and-testing-synchrony-measures/" title="Next Post: Discussion and planning GUI for NLTSA and testing synchrony measures">Discussion and planning GUI for NLTSA and testing synchrony measures &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/C-PAC/blog/2015/08/14/clustering-and-avalanche-detection-algorithms/">Clustering and Avalanche Detection Algorithms [in PROGRESS]</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/08/07/integration-of-measures-and-point-process-developing/">Integration of Measures and Point Process Developing</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/07/22/discussion-and-planning-gui-for-nltsa-and-testing-synchrony-measures/">Discussion and Planning GUI for NLTSA and Testing Synchrony Measures</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/07/15/implementing-modules-in-the-gui/">Implementing Modules in CPAC&#8217;s GUI</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/07/09/testing-different-parcellations-over-ad-patients-data/">Testing Over ADHD Patients Data</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/erramuzpe">@erramuzpe</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'erramuzpe',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/C-PAC/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - github.com/erramuzpe -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'toolsforcpac';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://erramuzpe.github.io/C-PAC/blog/2015/07/15/implementing-modules-in-the-gui/';
        var disqus_url = 'http://erramuzpe.github.io/C-PAC/blog/2015/07/15/implementing-modules-in-the-gui/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
