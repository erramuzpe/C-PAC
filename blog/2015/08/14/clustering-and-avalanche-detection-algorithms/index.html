
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Clustering and Avalanche Detection Algorithms - BUILDING NON-LINEAR ANALYSIS TOOLS FOR C-PAC</title>
  <meta name="author" content="github.com/erramuzpe">

  
  <meta name="description" content="This week, as planned from the previous one, the integration has been extensively worked: the cpac_pipeline.py has now our workflow fully integrated &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://erramuzpe.github.io/C-PAC/blog/2015/08/14/clustering-and-avalanche-detection-algorithms/">
  <link href="/C-PAC/favicon.png" rel="icon">
  <link href="/C-PAC/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/C-PAC/atom.xml" rel="alternate" title="BUILDING NON-LINEAR ANALYSIS TOOLS FOR C-PAC" type="application/atom+xml">
  <script src="/C-PAC/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/C-PAC/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/C-PAC/">BUILDING NON-LINEAR ANALYSIS TOOLS FOR C-PAC</a></h1>
  
    <h2>Contributing to C-PAC</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/C-PAC/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="erramuzpe.github.io/C-PAC">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/C-PAC/">Blog</a></li>
  <li><a href="/C-PAC/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Clustering and Avalanche Detection Algorithms</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-14T13:10:51+02:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:10 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>This week, as planned from the previous one, the integration has been extensively worked: the <em>cpac_pipeline.py</em> has now our workflow fully integrated and I have change the workflows into a single one, making it easier the call to the methods. Also, the treatment of the inputs has changed, since we are not making the extraction of the series anymore (another module of C-PAC is taking the responsibility). But more interestingly, we have enforced the Criticality package with the correction of the Point Process and Conditional Rate Mapping from the previous week and the developing of 2 new functions: Clustering and Avalanche detection algorithms.</p>

<p>For this algorithms, we have also followed the headlines explained in the paper of <a href="http://journal.frontiersin.org/article/10.3389/fphys.2012.00015/abstract">Tagliazucchi et al</a> (&ldquo;<em>Criticality in large-scale brain fMRI dynamics unveiled by a novel point process analysis</em>&rdquo;), we have been able to extract Avalanches in the brain, wich opens a new perspective in the analysis of brain dynamics in C-PAC.</p>

<h2><strong> Clustering Detection  </strong></h2>

<p>The technique is described, extracted from the section  <em>Methods</em> of the paper, as:</p>

<p><em>To detect contiguous clusters of activated voxels (defined as those crossing the threshold), for each time step, the problem was reduced to the detection of connected components in a suitably defined graph or network. More precisely, for each volume, a graph was constructed having each voxel as a node, and two nodes connected with a link if they were both activated (BOLD signal above 1 SD) and also first neighbors in the spatial sense. The connected components of this graph correspond to clusters of contiguous activated voxels isolated from other similarly defined clusters.</em></p>

<p>The implementation of this approach was straightforward, but it has many checks to do, so it is an algorithm to code very carefully. It is a first draft of the algorithm and the purpose was to have a functional procedure asap. In future revisions, I will try to rewrite it in a more “pythonic way”.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="c"># Detects clusters after Point Processing a Brain </span>
</span><span class='line'><span class="k">def</span> <span class="nf">cluster_detection</span><span class="p">(</span><span class="n">in_file</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">nibabel</span> <span class="kn">as</span> <span class="nn">nb</span>
</span><span class='line'>    <span class="kn">from</span> <span class="nn">CPAC.criticallity</span> <span class="kn">import</span> <span class="n">point_process</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Treat fMRI image</span>
</span><span class='line'>    <span class="n">img</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">in_file</span><span class="p">)</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
</span><span class='line'>    <span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">n_z</span><span class="p">,</span> <span class="n">n_t</span><span class="p">)</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Get the PP data</span>
</span><span class='line'>    <span class="n">pp_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">n_z</span><span class="p">,</span> <span class="n">n_t</span><span class="p">))</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">i_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_x</span><span class="p">):</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">j_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_y</span><span class="p">):</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">k_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_z</span><span class="p">):</span>
</span><span class='line'>                <span class="n">voxel_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">,:]</span>
</span><span class='line'>                <span class="n">pp_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">point_process</span><span class="p">(</span><span class="n">voxel_data</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">cluster_graph_data_total</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">n_z</span><span class="p">,</span> <span class="n">n_t</span><span class="p">))</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">t_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_t</span><span class="p">):</span>
</span><span class='line'>        <span class="n">time_slice</span> <span class="o">=</span> <span class="n">pp_data</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span>
</span><span class='line'>        <span class="n">cluster_graph_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">n_z</span><span class="p">))</span>
</span><span class='line'>        <span class="n">cluster_number</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="n">i_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_x</span><span class="p">):</span>
</span><span class='line'>            <span class="k">for</span> <span class="n">j_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_y</span><span class="p">):</span>
</span><span class='line'>                <span class="k">for</span> <span class="n">k_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_z</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">if</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c"># is active, check if it has active neighboours</span>
</span><span class='line'>                        <span class="k">if</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="ow">or</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> \
</span><span class='line'>                        <span class="ow">or</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="ow">or</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> \
</span><span class='line'>                        <span class="ow">or</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>
</span><span class='line'>                            <span class="k">if</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c"># if is not in any previous cluster</span>
</span><span class='line'>                                <span class="n">this_cluster</span> <span class="o">=</span> <span class="p">(</span><span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="ow">or</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> \
</span><span class='line'>                                <span class="ow">or</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="ow">or</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> \
</span><span class='line'>                                <span class="ow">or</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">or</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>                                <span class="k">if</span> <span class="n">this_cluster</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c">#no neighbours in any previous cluster neither</span>
</span><span class='line'>                                    <span class="n">this_cluster</span> <span class="o">=</span> <span class="n">cluster_number</span>
</span><span class='line'>                                    <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>                                    <span class="n">cluster_number</span> <span class="o">=</span> <span class="n">cluster_number</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>                                <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                                    <span class="c">#check cluster union</span>
</span><span class='line'>                                    <span class="n">merge_clusters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">],</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> \
</span><span class='line'>                                <span class="p">,</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">],</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> \
</span><span class='line'>                                <span class="p">,</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span>
</span><span class='line'>                                    <span class="n">merge_clusters</span> <span class="o">=</span> <span class="n">merge_clusters</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="c">#quit first value = 0</span>
</span><span class='line'>
</span><span class='line'>                                    <span class="n">this_cluster</span> <span class="o">=</span> <span class="n">merge_clusters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>                                    <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>                                    <span class="k">for</span> <span class="n">cluster_to_merge</span> <span class="ow">in</span> <span class="n">merge_clusters</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span class='line'>                                        <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">cluster_graph_data</span> <span class="o">==</span> <span class="n">cluster_to_merge</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>                            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                                <span class="n">this_cluster</span> <span class="o">=</span> <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>                            <span class="c">#find neighbours and give cluster_number</span>
</span><span class='line'>                            <span class="k">if</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>                                <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>                            <span class="k">elif</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>                                <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>                            <span class="k">elif</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>                                <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>                            <span class="k">elif</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>                                <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">k_</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>                            <span class="k">elif</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>                                <span class="n">cluster_graph_data</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_cluster</span>
</span><span class='line'>                            <span class="k">elif</span> <span class="n">time_slice</span><span class="p">[</span><span class="n">i_</span><span class="p">,</span><span class="n">j_</span><span class="p">,</span><span class="n">k_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>                    <span class="c"># if not == 1¡, keep the search </span>
</span><span class='line'>                        <span class="c"># if not neighbours, keep the search</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">cluster_graph_data_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span> <span class="o">=</span> <span class="n">cluster_graph_data</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">cluster_graph_data_total</span>
</span></code></pre></td></tr></table></div></figure>


<h2><strong> Avalanche Detection </strong></h2>

<p>The technique can be easily described, extracted from the section  <em>Methods</em> of the paper:</p>

<p><em>The point process is defined by the sequences of time points at which the BOLD signal crosses a given threshold from below. (&hellip;) To construct the conditional rates the point process is defined at a seed location and at the targets throughout the entire brain. The BOLD signal is extracted from a seed region (top trace) and the points (arrows and vertical dashed lines) are defined by the crossings at 1 SD (horizontal dashed lines). Every time the signal at a target region crosses the threshold (asterisks) up to 2 time steps later than in the seed, the rate at the target is increased in one unit. This rate is normalized by the number of points in the seed. The top panel shows the location of the seed and of the two example targets, as well as the resulting average conditional rates maps (left) and DMN obtained from PICA (right). Medium panels show the BOLD signal at the seed and at the two example target regions.</em></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
</pre></td><td class='code'><pre><code class='py'><span class='line'><span class="k">def</span> <span class="nf">avalanche_detec</span><span class="p">(</span><span class="n">cluster_file</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">nibabel</span> <span class="kn">as</span> <span class="nn">nb</span>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># Treat fMRI image</span>
</span><span class='line'>    <span class="n">img</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">cluster_file</span><span class="p">)</span>
</span><span class='line'>    <span class="n">cluster_data</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
</span><span class='line'>    <span class="p">(</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">n_z</span><span class="p">,</span> <span class="n">n_t</span><span class="p">)</span> <span class="o">=</span> <span class="n">cluster_data</span><span class="o">.</span><span class="n">shape</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">avalanche_id_total</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span><span class="p">,</span> <span class="n">n_z</span><span class="p">,</span> <span class="n">n_t</span><span class="p">))</span>
</span><span class='line'>    <span class="n">avalanche_id_num</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="n">t_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_t</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">t_</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c">#if first timestep, all are candidates</span>
</span><span class='line'>            <span class="n">time_slice</span> <span class="o">=</span> <span class="n">cluster_data</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span>
</span><span class='line'>            <span class="n">time_slice_fut</span> <span class="o">=</span> <span class="n">cluster_data</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">avalanche_id_now</span> <span class="o">=</span> <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span>
</span><span class='line'>            <span class="n">avalanche_id_fut</span> <span class="o">=</span> <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">cluster_data</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">])[</span><span class="mi">1</span><span class="p">:]:</span> <span class="c">#iterate over clusters</span>
</span><span class='line'>                <span class="c"># NEW AVALANCHE CASE</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">time_slice_fut</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="p">:</span>
</span><span class='line'>                    <span class="n">avalanche_id_now</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)]</span> <span class="o">=</span> <span class="n">avalanche_id_num</span>
</span><span class='line'>
</span><span class='line'>                    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">time_slice_fut</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span class='line'>                        <span class="n">avalanche_id_fut</span><span class="p">[(</span><span class="n">time_slice_fut</span><span class="o">==</span><span class="n">value</span><span class="p">)]</span> <span class="o">=</span> <span class="n">avalanche_id_num</span>
</span><span class='line'>
</span><span class='line'>                    <span class="n">avalanche_id_num</span> <span class="o">=</span> <span class="n">avalanche_id_num</span> <span class="o">+</span><span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>                    <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span> <span class="o">=</span> <span class="n">avalanche_id_now</span>
</span><span class='line'>                    <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">avalanche_id_fut</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>        <span class="k">elif</span> <span class="n">t_</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">n_t</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>  <span class="c">#if not first timestep, check previous</span>
</span><span class='line'>            <span class="k">print</span> <span class="n">t_</span>
</span><span class='line'>            <span class="c">#time_slice_past = cluster_data[:,:,:,t_-1]</span>
</span><span class='line'>            <span class="n">time_slice</span> <span class="o">=</span> <span class="n">cluster_data</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span>
</span><span class='line'>            <span class="n">time_slice_fut</span> <span class="o">=</span> <span class="n">cluster_data</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">avalanche_id_now</span> <span class="o">=</span> <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span>
</span><span class='line'>            <span class="n">avalanche_id_fut</span> <span class="o">=</span> <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">cluster_data</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">])[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span class='line'>                <span class="c"># PREVIOUS AVALANCHE CASE</span>
</span><span class='line'>                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">avalanche_id_now</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">time_slice_fut</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="p">:</span>
</span><span class='line'>
</span><span class='line'>                        <span class="n">this_avalanche</span> <span class="o">=</span> <span class="n">avalanche_id_now</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>                        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">time_slice_fut</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span class='line'>                            <span class="n">avalanche_id_fut</span><span class="p">[(</span><span class="n">time_slice_fut</span><span class="o">==</span><span class="n">value</span><span class="p">)]</span> <span class="o">=</span> <span class="n">this_avalanche</span>
</span><span class='line'>
</span><span class='line'>                        <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">avalanche_id_fut</span>
</span><span class='line'>
</span><span class='line'>                <span class="c"># NEW AVALANCHE CASE</span>
</span><span class='line'>                <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">avalanche_id_now</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c">#and np.count_nonzero(time_slice_past[(time_slice==cluster)]) == 0:</span>
</span><span class='line'>                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">time_slice_fut</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="p">:</span>
</span><span class='line'>
</span><span class='line'>                        <span class="n">avalanche_id_now</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)]</span> <span class="o">=</span> <span class="n">avalanche_id_num</span>
</span><span class='line'>
</span><span class='line'>                        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">time_slice_fut</span><span class="p">[(</span><span class="n">time_slice</span><span class="o">==</span><span class="n">cluster</span><span class="p">)])[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span class='line'>                            <span class="n">avalanche_id_fut</span><span class="p">[(</span><span class="n">time_slice_fut</span><span class="o">==</span><span class="n">value</span><span class="p">)]</span> <span class="o">=</span> <span class="n">avalanche_id_num</span>
</span><span class='line'>
</span><span class='line'>                        <span class="n">avalanche_id_num</span> <span class="o">=</span> <span class="n">avalanche_id_num</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>                        <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="p">]</span> <span class="o">=</span> <span class="n">avalanche_id_now</span>
</span><span class='line'>                        <span class="n">avalanche_id_total</span><span class="p">[:,:,:,</span><span class="n">t_</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">avalanche_id_fut</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="n">img_new</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">Nifti1Image</span><span class="p">(</span><span class="n">avalanche_id_total</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">get_header</span><span class="p">(),</span> <span class="n">affine</span><span class="o">=</span><span class="n">img</span><span class="o">.</span><span class="n">get_affine</span><span class="p">())</span>
</span><span class='line'>    <span class="c"># Reconstruct the 4D volume</span>
</span><span class='line'>    <span class="n">cond_rm_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s">&#39;avalanche.nii.gz&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">img_new</span><span class="o">.</span><span class="n">to_filename</span><span class="p">(</span><span class="n">cond_rm_file</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">avalanche_id_total</span>
</span></code></pre></td></tr></table></div></figure>


<h2><strong> Discussions on Clustering and Avalanche detection </strong></h2>

<h4><strong> Clustering Detection </strong></h4>

<p>After coding the algorithms as explained in the paper, we extended it to some discussion, we found further questions of interest with regard to the algorithm. Questions that have emerged after initial implementation are the following:</p>

<p>I was wondering about the root aspects of defining 1 single neighbour and not more in the clustering detection and also about the decision of determining a cluster just from one neighbouring. Which are the implications of these assumptions? I actually tried the implementation extending the neighbouring adding more neighbours (2 and 3).</p>

<p>I came across with less and bigger clusters, which we discussed for its possible interest specifically with brain images. See images below for clusters with the proposed 1 distance for neighbours and with a distance of 2, at a given time:</p>

<p><img class="center" src="/C-PAC/images/cluster.png" width="800" height="800" title="image" alt="image"></p>

<p>From these approaches we can have some statistics, showing that the choice of the number of neighbours to consider is not a trivial decision:</p>

<p><img class="center" src="/C-PAC/images/cluster_stats.png" width="800" height="800" title="image" alt="image"></p>

<h4><strong> Avalanche Detection </strong></h4>

<p>We collected all the avalanches for a given subject in a 4D Nifti file. Avalanches were significantly different depending of the choice of the neighbouring size (due to the change of the size of the mean cluster). Here we show a first approximation, we would have liked to make a movie, but we ran out of time for this week.</p>

<p><img class="center" src="/C-PAC/images/avalanche.gif" width="800" height="800" title="image" alt="image"></p>

<p>Here I have made a gif to represent how an avalanche is. This is an avalanche for the N2 cluster, take into account just the voxels in red/orange. It can be showed how the avalanche borns, grows and spreads, and finally dies.</p>

<h2><strong> Heading last week of coding </strong></h2>

<p>Our objectives for next week are:</p>

<ul>
<li><p>Perform extensive testing over the measures and chose which ones are going to be in the package.</p></li>
<li><p>Make code corrections and comment all the measures. This will head us into the documentation we have to make.</p></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">github.com/erramuzpe</span></span>

      




<time class='entry-date' datetime='2015-08-14T13:10:51+02:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:10 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://erramuzpe.github.io/C-PAC/blog/2015/08/14/clustering-and-avalanche-detection-algorithms/" data-via="" data-counturl="http://erramuzpe.github.io/C-PAC/blog/2015/08/14/clustering-and-avalanche-detection-algorithms/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/C-PAC/blog/2015/08/07/integration-of-measures-and-point-process-developing/" title="Previous Post: Integration of measures and Point Process developing">&laquo; Integration of measures and Point Process developing</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/C-PAC/blog/2015/08/14/clustering-and-avalanche-detection-algorithms/">Clustering and Avalanche Detection Algorithms</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/08/07/integration-of-measures-and-point-process-developing/">Integration of Measures and Point Process Developing</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/07/22/discussion-and-planning-gui-for-nltsa-and-testing-synchrony-measures/">Discussion and Planning GUI for NLTSA and Testing Synchrony Measures</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/07/15/implementing-modules-in-the-gui/">Implementing Modules in CPAC&#8217;s GUI</a>
      </li>
    
      <li class="post">
        <a href="/C-PAC/blog/2015/07/09/testing-different-parcellations-over-ad-patients-data/">Testing Over ADHD Patients Data</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/erramuzpe">@erramuzpe</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'erramuzpe',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/C-PAC/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - github.com/erramuzpe -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'toolsforcpac';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://erramuzpe.github.io/C-PAC/blog/2015/08/14/clustering-and-avalanche-detection-algorithms/';
        var disqus_url = 'http://erramuzpe.github.io/C-PAC/blog/2015/08/14/clustering-and-avalanche-detection-algorithms/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
